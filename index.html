<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Honey Badger AR Preview</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
      body {
        margin: 0;
        background: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
      }
      #viewer-wrapper {
        position: relative;
        width: 100%;
        max-width: 600px;
        aspect-ratio: 1;
      }
      model-viewer {
        width: 100%;
        height: 100%;
      }
      #ar-launcher {
        position: absolute;
        inset: 0;
        z-index: 2;
        background: transparent;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div id="viewer-wrapper">
      <!-- ✅ 3D preview -->
      <model-viewer
        id="previewModel"
        src="model.glb"
        alt="Alpine Goat"
        camera-controls
        autoplay
        exposure="1"
        auto-rotate
        ar
        ar-modes="scene-viewer quick-look webxr"
        ios-src="honey.usdz"
      ></model-viewer>

      <!-- ✅ Invisible link over 3D model -->
      <a id="ar-launcher" href="#" aria-label="Launch in AR"></a>
    </div>

    <script>
      const arLink = document.getElementById('ar-launcher');

      const androidIntentURL =
        'intent://arvr.google.com/scene-viewer/1.2?' +
        'file=https://storage.googleapis.com/ar-answers-in-search-models/static/AlpineGoat/model.glb' +
        '&title=Alpine+Goat' +
        '&mode=ar_only' +
        '&sound=https://storage.googleapis.com/ar-answers-in-search-models/static/AlpineGoat/Goat_Alpine_Male_Adult.ogg' +
        '#Intent;scheme=https;package=com.google.android.googlequicksearchbox;' +
        'S.browser_fallback_url=https://arvr.google.com/scene-viewer?' +
        'file=https://storage.googleapis.com/ar-answers-in-search-models/static/AlpineGoat/model.glb' +
        '&title=Alpine+Goat' +
        '&mode=ar_only' +
        '&sound=https://storage.googleapis.com/ar-answers-in-search-models/static/AlpineGoat/Goat_Alpine_Male_Adult.ogg;end;';

      const iosUSDZLink =
        'https://developer.apple.com/augmented-reality/quick-look/models/toy_biplane/toy_biplane.usdz';

      const isIOS =
        /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;

      if (isIOS) {
        arLink.setAttribute('rel', 'ar');
        arLink.setAttribute('href', iosUSDZLink);
      } else {
        arLink.setAttribute('href', androidIntentURL);
      }
    </script>
  </body>
</html>
