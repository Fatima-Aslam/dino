<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Honey Badger AR</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
      body {
        margin: 0;
        background: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
      }

      #container {
        position: relative;
        width: 100%;
        max-width: 400px;
      }

      model-viewer {
        width: 100%;
        height: auto;
      }

      #custom-ar-button {
        position: absolute;
        inset: 0;
        cursor: pointer;
        background: transparent;
        border: none;
      }
    </style>
  </head>
  <body>
    <div id="container">
      <!-- ✅ 3D Preview -->
      <model-viewer
        id="preview"
        camera-controls
        autoplay
        ar
        ar-modes="webxr quick-look"  <!-- ❌ exclude 'scene-viewer' to prevent default -->
        ios-src="https://developer.apple.com/augmented-reality/quick-look/models/toy_biplane/toy_biplane.usdz"
        src="https://storage.googleapis.com/ar-answers-in-search-models/static/AlpineGoat/model.glb"
        alt="Honey Badger"
      ></model-viewer>

      <!-- ✅ Custom button overlays the entire model-viewer -->
      <a id="custom-ar-button" href="#" aria-label="Launch in AR"></a>
    </div>

    <script>
      const arButton = document.getElementById("custom-ar-button");

      const androidIntentURL =
        'intent://arvr.google.com/scene-viewer/1.2?' +
        'file=https://storage.googleapis.com/ar-answers-in-search-models/static/AlpineGoat/model.glb' +
        '&title=Alpine+Goat' +
        '&mode=ar_only' +
        '&sound=https://storage.googleapis.com/ar-answers-in-search-models/static/AlpineGoat/Goat_Alpine_Male_Adult.ogg' +
        '#Intent;scheme=https;package=com.google.android.googlequicksearchbox;' +
        'S.browser_fallback_url=https://arvr.google.com/scene-viewer?' +
        'file=https://storage.googleapis.com/ar-answers-in-search-models/static/AlpineGoat/model.glb' +
        '&title=Alpine+Goat' +
        '&mode=ar_only' +
        '&sound=https://storage.googleapis.com/ar-answers-in-search-models/static/AlpineGoat/Goat_Alpine_Male_Adult.ogg;end;';

      const iosUSDZLink =
        'https://developer.apple.com/augmented-reality/quick-look/models/toy_biplane/toy_biplane.usdz';

      const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;

      arButton.setAttribute('href', isIOS ? iosUSDZLink : androidIntentURL);
      if (isIOS) arButton.setAttribute('rel', 'ar');
    </script>
  </body>
</html>
